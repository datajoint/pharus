<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pharus package &mdash; Pharus  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="API" href="modules.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Pharus
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="user.html">User Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="developer.html">Developer Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="dev_notes.html">General Notes</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="modules.html">API</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">pharus package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-pharus.error">pharus.error module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-pharus.interface">pharus.interface module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-pharus.server">pharus.server module</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-pharus.version">pharus.version module</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Pharus</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="developer.html">Developer Documentation</a> &raquo;</li>
          <li><a href="modules.html">API</a> &raquo;</li>
      <li>pharus package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/pharus.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pharus-package">
<h1>pharus package<a class="headerlink" href="#pharus-package" title="Permalink to this headline"></a></h1>
<section id="module-pharus.error">
<span id="pharus-error-module"></span><h2>pharus.error module<a class="headerlink" href="#module-pharus.error" title="Permalink to this headline"></a></h2>
<p>Error class library.</p>
<dl class="py exception">
<dt class="sig sig-object py" id="pharus.error.InvalidRestriction">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pharus.error.</span></span><span class="sig-name descname"><span class="pre">InvalidRestriction</span></span><a class="headerlink" href="#pharus.error.InvalidRestriction" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Exception raised when restrictions result in no records when expected at least one.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="pharus.error.UnsupportedTableType">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pharus.error.</span></span><span class="sig-name descname"><span class="pre">UnsupportedTableType</span></span><a class="headerlink" href="#pharus.error.UnsupportedTableType" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>Exception raised on unsupported table types.</p>
</dd></dl>

</section>
<section id="module-pharus.interface">
<span id="pharus-interface-module"></span><h2>pharus.interface module<a class="headerlink" href="#module-pharus.interface" title="Permalink to this headline"></a></h2>
<p>Library for interfaces into DataJoint pipelines.</p>
</section>
<section id="module-pharus.server">
<span id="pharus-server-module"></span><h2>pharus.server module<a class="headerlink" href="#module-pharus.server" title="Permalink to this headline"></a></h2>
<p>Exposed REST API.</p>
<dl class="py function">
<dt class="sig sig-object py" id="pharus.server.api_version">
<span class="sig-prename descclassname"><span class="pre">pharus.server.</span></span><span class="sig-name descname"><span class="pre">api_version</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#pharus.server.api_version" title="Permalink to this definition"></a></dt>
<dd><p>Handler for <code class="docutils literal notranslate"><span class="pre">/version</span></code> route.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>API version</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
<dl class="http get">
<dt class="sig sig-object http" id="get--version">
<span class="sig-name descname"><span class="pre">GET</span> </span><span class="sig-name descname"><span class="pre">/version</span></span><a class="headerlink" href="#get--version" title="Permalink to this definition"></a></dt>
<dd><p>Route to check server health returning the API version.</p>
<p><strong>Example request</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/version</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">fakeservices.datajoint.io</span>
</pre></div>
</div>
<p><strong>Example response</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Vary</span><span class="o">:</span> <span class="l">Accept</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;0.1.0&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Status Codes</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a></span> – No error.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pharus.server.attribute">
<span class="sig-prename descclassname"><span class="pre">pharus.server.</span></span><span class="sig-name descname"><span class="pre">attribute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">jwt_payload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#pharus.server.attribute" title="Permalink to this definition"></a></dt>
<dd><p>Handler for <code class="docutils literal notranslate"><span class="pre">/schema/{schema_name}/table/{table_name}/attribute</span></code> route.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>jwt_payload</strong> (<em>dict</em>) – Dictionary containing databaseAddress, username, and password strings.</p></li>
<li><p><strong>schema_name</strong> (<em>str</em>) – Schema name.</p></li>
<li><p><strong>table_name</strong> (<em>str</em>) – Table name.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>If successful then sends back dict of table attributes otherwise returns error.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
<dl class="http get">
<dt class="sig sig-object http" id="get--schema-schema_name-table-table_name-attribute">
<span class="sig-name descname"><span class="pre">GET</span> </span><span class="sig-name descname"><span class="pre">/schema/{schema_name}/table/{table_name}/attribute</span></span><a class="headerlink" href="#get--schema-schema_name-table-table_name-attribute" title="Permalink to this definition"></a></dt>
<dd><p>Route to get metadata on table attributes.</p>
<p><strong>Example request</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/schema/alpha_company/table/Computer/attribute</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">fakeservices.datajoint.io</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">Bearer &lt;token&gt;</span>
</pre></div>
</div>
<p><strong>Example successful response</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span>HTTP/1.1 200 OK
Vary: Accept
Content-Type: application/json

{
    &quot;attributeHeader&quot;: [
        &quot;name&quot;,
        &quot;type&quot;,
        &quot;nullable&quot;,
        &quot;default&quot;,
        &quot;autoincrement&quot;
    ],
    &quot;attributes&quot;: {
        &quot;primary&quot;: [
            [
                &quot;computer_id&quot;,
                &quot;uuid&quot;,
                false,
                null,
                false
            ]
        ],
        &quot;secondary&quot;: [
            [
                &quot;computer_serial&quot;,
                &quot;varchar(9)&quot;,
                false,
                &quot;&quot;ABC101&quot;&quot;,
                false
            ],
            [
                &quot;computer_brand&quot;,
                &quot;enum(&#39;HP&#39;,&#39;Dell&#39;)&quot;,
                false,
                null,
                false
            ],
            [
                &quot;computer_built&quot;,
                &quot;date&quot;,
                false,
                null,
                false
            ],
            [
                &quot;computer_processor&quot;,
                &quot;double&quot;,
                false,
                null,
                false
            ],
            [
                &quot;computer_memory&quot;,
                &quot;int&quot;,
                false,
                null,
                false
            ],
            [
                &quot;computer_weight&quot;,
                &quot;float&quot;,
                false,
                null,
                false
            ],
            [
                &quot;computer_cost&quot;,
                &quot;decimal(6,2)&quot;,
                false,
                null,
                false
            ],
            [
                &quot;computer_preowned&quot;,
                &quot;tinyint&quot;,
                false,
                null,
                false
            ],
            [
                &quot;computer_purchased&quot;,
                &quot;datetime&quot;,
                false,
                null,
                false
            ],
            [
                &quot;computer_updates&quot;,
                &quot;time&quot;,
                true,
                &quot;null&quot;,
                false
            ],
            [
                &quot;computer_accessories&quot;,
                &quot;longblob&quot;,
                true,
                &quot;null&quot;,
                false
            ]
        ]
    }
}
</pre></div>
</div>
<p><strong>Example unexpected response</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">500</span> <span class="ne">Internal Server Error</span>
<span class="na">Vary</span><span class="o">:</span> <span class="l">Accept</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/plain</span>

400 Bad Request: The browser (or proxy) sent a request that this server could not
    understand.
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Request Headers</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span><a class="reference external" href="https://tools.ietf.org/html/rfc7235#section-4.2">Authorization</a></span> – Bearer &lt;OAuth2_token&gt;</p></li>
</ul>
</dd>
<dt class="field-even">Response Headers</dt>
<dd class="field-even"><ul class="simple">
<li><p><span><a class="reference external" href="https://tools.ietf.org/html/rfc7231#section-3.1.1.5">Content-Type</a></span> – text/plain, application/json</p></li>
</ul>
</dd>
<dt class="field-odd">Status Codes</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a></span> – No error.</p></li>
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.5.1">500 Internal Server Error</a></span> – Unexpected error encountered. Returns the error message as a string.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pharus.server.definition">
<span class="sig-prename descclassname"><span class="pre">pharus.server.</span></span><span class="sig-name descname"><span class="pre">definition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">jwt_payload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#pharus.server.definition" title="Permalink to this definition"></a></dt>
<dd><p>Handler for <code class="docutils literal notranslate"><span class="pre">/schema/{schema_name}/table/{table_name}/definition</span></code> route.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>jwt_payload</strong> (<em>dict</em>) – Dictionary containing databaseAddress, username, and password strings.</p></li>
<li><p><strong>schema_name</strong> (<em>str</em>) – Schema name.</p></li>
<li><p><strong>table_name</strong> (<em>str</em>) – Table name.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>If successful then sends back definition for table otherwise returns error.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<dl class="http get">
<dt class="sig sig-object http" id="get--schema-schema_name-table-table_name-definition">
<span class="sig-name descname"><span class="pre">GET</span> </span><span class="sig-name descname"><span class="pre">/schema/{schema_name}/table/{table_name}/definition</span></span><a class="headerlink" href="#get--schema-schema_name-table-table_name-definition" title="Permalink to this definition"></a></dt>
<dd><p>Route to get DataJoint table definition.</p>
<p><strong>Example request</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/schema/alpha_company/table/Computer/definition</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">fakeservices.datajoint.io</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">Bearer &lt;token&gt;</span>
</pre></div>
</div>
<p><strong>Example successful response</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Vary</span><span class="o">:</span> <span class="l">Accept</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/plain</span>

# Computers that belong to the company
computer_id          : uuid                      # unique id
---
computer_serial=&quot;ABC101&quot; : varchar(9)            # manufacturer serial number
computer_brand       : enum(&#39;HP&#39;,&#39;Dell&#39;)         # manufacturer brand
computer_built       : date                      # manufactured date
computer_processor   : double                    # processing power in GHz
computer_memory      : int                       # RAM in GB
computer_weight      : float                     # weight in lbs
computer_cost        : decimal(6,2)              # purchased price
computer_preowned    : tinyint                   # purchased as new or used
computer_purchased   : datetime                  # purchased date and time
computer_updates=null : time                     # scheduled daily update timeslot
computer_accessories=null : longblob             # included additional accessories
</pre></div>
</div>
<p><strong>Example unexpected response</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">500</span> <span class="ne">Internal Server Error</span>
<span class="na">Vary</span><span class="o">:</span> <span class="l">Accept</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/plain</span>

400 Bad Request: The browser (or proxy) sent a request that this server could not
    understand.
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Request Headers</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span><a class="reference external" href="https://tools.ietf.org/html/rfc7235#section-4.2">Authorization</a></span> – Bearer &lt;OAuth2_token&gt;</p></li>
</ul>
</dd>
<dt class="field-even">Response Headers</dt>
<dd class="field-even"><ul class="simple">
<li><p><span><a class="reference external" href="https://tools.ietf.org/html/rfc7231#section-3.1.1.5">Content-Type</a></span> – text/plain</p></li>
</ul>
</dd>
<dt class="field-odd">Status Codes</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a></span> – No error.</p></li>
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.5.1">500 Internal Server Error</a></span> – Unexpected error encountered. Returns the error message as a string.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pharus.server.dependency">
<span class="sig-prename descclassname"><span class="pre">pharus.server.</span></span><span class="sig-name descname"><span class="pre">dependency</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">jwt_payload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#pharus.server.dependency" title="Permalink to this definition"></a></dt>
<dd><p>Handler for <code class="docutils literal notranslate"><span class="pre">/schema/{schema_name}/table/{table_name}/dependency</span></code> route.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>jwt_payload</strong> (<em>dict</em>) – Dictionary containing databaseAddress, username, and password strings.</p></li>
<li><p><strong>schema_name</strong> (<em>str</em>) – Schema name.</p></li>
<li><p><strong>table_name</strong> (<em>str</em>) – Table name.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>If sucessfuly sends back a list of dependencies otherwise returns error.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
<dl class="http get">
<dt class="sig sig-object http" id="get--schema-schema_name-table-table_name-dependency">
<span class="sig-name descname"><span class="pre">GET</span> </span><span class="sig-name descname"><span class="pre">/schema/{schema_name}/table/{table_name}/dependency</span></span><a class="headerlink" href="#get--schema-schema_name-table-table_name-dependency" title="Permalink to this definition"></a></dt>
<dd><p>Route to get the metadata in relation to the dependent records associated with a restricted subset of a table.</p>
<p><strong>Example request</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/schema/alpha_company/table/Computer/dependency?restriction=W3siYXR0cmlidXRlTmFtZSI6ICJjb21wdXRlcl9tZW1vcnkiLCAib3BlcmF0aW9uIjogIj49IiwgInZhbHVlIjogMTZ9XQo=</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">fakeservices.datajoint.io</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">Bearer &lt;token&gt;</span>
</pre></div>
</div>
<p><strong>Example successful response</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Vary</span><span class="o">:</span> <span class="l">Accept</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
    <span class="nt">&quot;dependencies&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;accessible&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nt">&quot;count&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="nt">&quot;schema&quot;</span><span class="p">:</span> <span class="s2">&quot;alpha_company&quot;</span><span class="p">,</span>
            <span class="nt">&quot;table&quot;</span><span class="p">:</span> <span class="s2">&quot;computer&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;accessible&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nt">&quot;count&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="nt">&quot;schema&quot;</span><span class="p">:</span> <span class="s2">&quot;alpha_company&quot;</span><span class="p">,</span>
            <span class="nt">&quot;table&quot;</span><span class="p">:</span> <span class="s2">&quot;#employee&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Example unexpected response</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">500</span> <span class="ne">Internal Server Error</span>
<span class="na">Vary</span><span class="o">:</span> <span class="l">Accept</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/plain</span>

400 Bad Request: The browser (or proxy) sent a request that this server could not
    understand.
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Query Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>schema_name</strong> – Schema name.</p></li>
<li><p><strong>table_name</strong> – Table name.</p></li>
<li><p><strong>restriction</strong> – Base64-encoded <code class="docutils literal notranslate"><span class="pre">AND</span></code> sequence of restrictions. For example, you
could restrict as <code class="docutils literal notranslate"><span class="pre">[{&quot;attributeName&quot;:</span> <span class="pre">&quot;computer_memory&quot;,</span> <span class="pre">&quot;operation&quot;:</span> <span class="pre">&quot;&gt;=&quot;,</span></code>-
<code class="docutils literal notranslate"><span class="pre">&quot;value&quot;:</span> <span class="pre">16}]</span></code> with this param set as
<code class="docutils literal notranslate"><span class="pre">W3siYXR0cmlidXRlTmFtZSI6ICJjb21wdXRlcl9tZW1vcnkiLCAib3Bl</span></code>-
<code class="docutils literal notranslate"><span class="pre">cmF0aW9uIjogIj49IiwgInZhbHVlIjogMTZ9XQo=</span></code>. Defaults to no restriction.</p></li>
</ul>
</dd>
<dt class="field-even">Request Headers</dt>
<dd class="field-even"><ul class="simple">
<li><p><span><a class="reference external" href="https://tools.ietf.org/html/rfc7235#section-4.2">Authorization</a></span> – Bearer &lt;OAuth2_token&gt;</p></li>
</ul>
</dd>
<dt class="field-odd">Response Headers</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span><a class="reference external" href="https://tools.ietf.org/html/rfc7231#section-3.1.1.5">Content-Type</a></span> – text/plain, application/json</p></li>
</ul>
</dd>
<dt class="field-even">Status Codes</dt>
<dd class="field-even"><ul class="simple">
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a></span> – No error.</p></li>
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.5.1">500 Internal Server Error</a></span> – Unexpected error encountered. Returns the error message as a string.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pharus.server.login">
<span class="sig-prename descclassname"><span class="pre">pharus.server.</span></span><span class="sig-name descname"><span class="pre">login</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#pharus.server.login" title="Permalink to this definition"></a></dt>
<dd><p><strong>WARNING</strong>: Currently, this implementation exposes user database credentials as plain
text in POST body once and stores it within a bearer token as Base64 encoded for
subsequent requests. That is how the server is able to submit queries on user’s behalf.
Due to this, it is required that remote hosts expose the server only under HTTPS to ensure
end-to-end encryption. Sending passwords in plain text over HTTPS in POST request body is
common and utilized by companies such as GitHub (2021) and Chase Bank (2021). On server
side, there is no caching, logging, or storage of received passwords or tokens and thus
available only briefly in memory. This means the primary vulnerable point is client side.
Users should be responsible with their passwords and bearer tokens treating them as
one-in-the-same. Be aware that if your client system happens to be compromised, a bad
actor could monitor your outgoing network requests and capture/log your credentials.
However, in such a terrible scenario, a bad actor would not only collect credentials for
your DataJoint database but also other sites such as github.com, chase.com, etc. Please be
responsible and vigilant with credentials and tokens on client side systems. Improvements
to the above strategy is currently being tracked in
<a class="reference external" href="https://github.com/datajoint/pharus/issues/82">https://github.com/datajoint/pharus/issues/82</a>.</p>
<p>Handler for <code class="docutils literal notranslate"><span class="pre">/login</span></code> route.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Function output is an encoded JWT if successful, otherwise return error message</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
<dl class="http post">
<dt class="sig sig-object http" id="post--login">
<span class="sig-name descname"><span class="pre">POST</span> </span><span class="sig-name descname"><span class="pre">/login</span></span><a class="headerlink" href="#post--login" title="Permalink to this definition"></a></dt>
<dd><p>Route to generate an authentication token.</p>
<p><strong>Example request</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/login</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">fakeservices.datajoint.io</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/json</span>

{
    &quot;databaseAddress&quot;: &quot;tutorial-db.datajoint.io&quot;,
    &quot;username&quot;: &quot;user1&quot;,
    &quot;password&quot;: &quot;password1&quot;
}
</pre></div>
</div>
<p><strong>Example successful response</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Vary</span><span class="o">:</span> <span class="l">Accept</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
    <span class="nt">&quot;jwt&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;token&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Example unexpected response</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">500</span> <span class="ne">Internal Server Error</span>
<span class="na">Vary</span><span class="o">:</span> <span class="l">Accept</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/plain</span>

400 Bad Request: The browser (or proxy) sent a request that this server could not
    understand.
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Response Headers</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span><a class="reference external" href="https://tools.ietf.org/html/rfc7231#section-3.1.1.5">Content-Type</a></span> – text/plain, application/json</p></li>
</ul>
</dd>
<dt class="field-even">Status Codes</dt>
<dd class="field-even"><ul class="simple">
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a></span> – No error.</p></li>
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.5.1">500 Internal Server Error</a></span> – Unexpected error encountered. Returns the error message as a string.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pharus.server.protected_route">
<span class="sig-prename descclassname"><span class="pre">pharus.server.</span></span><span class="sig-name descname"><span class="pre">protected_route</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">function</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Callable</span></span></span><a class="headerlink" href="#pharus.server.protected_route" title="Permalink to this definition"></a></dt>
<dd><p>Protected route function decorator which authenticates requests.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>function</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Callable</span></code>) – Function to decorate, typically routes</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Function output if JWT authetication is successful, otherwise return error
message</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Callable</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pharus.server.record">
<span class="sig-prename descclassname"><span class="pre">pharus.server.</span></span><span class="sig-name descname"><span class="pre">record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">jwt_payload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">tuple</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#pharus.server.record" title="Permalink to this definition"></a></dt>
<dd><p>Handler for <code class="docutils literal notranslate"><span class="pre">/schema/{schema_name}/table/{table_name}/record</span></code> route.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>jwt_payload</strong> (<em>dict</em>) – Dictionary containing databaseAddress, username, and password strings.</p></li>
<li><p><strong>schema_name</strong> (<em>str</em>) – Schema name.</p></li>
<li><p><strong>table_name</strong> (<em>str</em>) – Table name.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>If successful performs desired operation based on HTTP method, otherwise returns
error.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Union[dict,</span> <span class="pre">str,</span> <span class="pre">tuple]</span></code></p>
</dd>
</dl>
<dl class="http get">
<dt class="sig sig-object http" id="get--schema-schema_name-table-table_name-record">
<span class="sig-name descname"><span class="pre">GET</span> </span><span class="sig-name descname"><span class="pre">/schema/{schema_name}/table/{table_name}/record</span></span><a class="headerlink" href="#get--schema-schema_name-table-table_name-record" title="Permalink to this definition"></a></dt>
<dd><p>Route to fetch records.</p>
<p><strong>Example request</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/schema/alpha_company/table/Computer/record?limit=1&amp;page=2&amp;order=computer_id%20DESC&amp;restriction=W3siYXR0cmlidXRlTmFtZSI6ICJjb21wdXRlcl9tZW1vcnkiLCAib3BlcmF0aW9uIjogIj49IiwgInZhbHVlIjogMTZ9XQo=</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">fakeservices.datajoint.io</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">Bearer &lt;token&gt;</span>
</pre></div>
</div>
<p><strong>Example successful response</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Vary</span><span class="o">:</span> <span class="l">Accept</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
    <span class="nt">&quot;recordHeader&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;computer_id&quot;</span><span class="p">,</span>
        <span class="s2">&quot;computer_serial&quot;</span><span class="p">,</span>
        <span class="s2">&quot;computer_brand&quot;</span><span class="p">,</span>
        <span class="s2">&quot;computer_built&quot;</span><span class="p">,</span>
        <span class="s2">&quot;computer_processor&quot;</span><span class="p">,</span>
        <span class="s2">&quot;computer_memory&quot;</span><span class="p">,</span>
        <span class="s2">&quot;computer_weight&quot;</span><span class="p">,</span>
        <span class="s2">&quot;computer_cost&quot;</span><span class="p">,</span>
        <span class="s2">&quot;computer_preowned&quot;</span><span class="p">,</span>
        <span class="s2">&quot;computer_purchased&quot;</span><span class="p">,</span>
        <span class="s2">&quot;computer_updates&quot;</span><span class="p">,</span>
        <span class="s2">&quot;computer_accessories&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;records&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span>
            <span class="s2">&quot;4e41491a-86d5-4af7-a013-89bde75528bd&quot;</span><span class="p">,</span>
            <span class="s2">&quot;DJS1JA17G&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Dell&quot;</span><span class="p">,</span>
            <span class="mi">1590364800</span><span class="p">,</span>
            <span class="mf">2.2</span><span class="p">,</span>
            <span class="mi">16</span><span class="p">,</span>
            <span class="mf">4.4</span><span class="p">,</span>
            <span class="s2">&quot;700.99&quot;</span><span class="p">,</span>
            <span class="mi">0</span><span class="p">,</span>
            <span class="mi">1603181061</span><span class="p">,</span>
            <span class="kc">null</span><span class="p">,</span>
            <span class="s2">&quot;=BLOB=&quot;</span>
        <span class="p">]</span>
    <span class="p">],</span>
    <span class="nt">&quot;totalCount&quot;</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Example unexpected response</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">500</span> <span class="ne">Internal Server Error</span>
<span class="na">Vary</span><span class="o">:</span> <span class="l">Accept</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/plain</span>

400 Bad Request: The browser (or proxy) sent a request that this server could not
    understand.
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Query Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>schema_name</strong> – Schema name.</p></li>
<li><p><strong>table_name</strong> – Table name.</p></li>
<li><p><strong>limit</strong> – Limit of how many records per page. Defaults to <code class="docutils literal notranslate"><span class="pre">1000</span></code>.</p></li>
<li><p><strong>page</strong> – Page requested. Defaults to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p></li>
<li><p><strong>order</strong> – Sort order. Defaults to <code class="docutils literal notranslate"><span class="pre">KEY</span> <span class="pre">ASC</span></code>.</p></li>
<li><p><strong>restriction</strong> – Base64-encoded <code class="docutils literal notranslate"><span class="pre">AND</span></code> sequence of restrictions. For example, you
could restrict as <code class="docutils literal notranslate"><span class="pre">[{&quot;attributeName&quot;:</span> <span class="pre">&quot;computer_memory&quot;,</span> <span class="pre">&quot;operation&quot;:</span> <span class="pre">&quot;&gt;=&quot;,</span></code>-
<code class="docutils literal notranslate"><span class="pre">&quot;value&quot;:</span> <span class="pre">16}]</span></code> with this param set as
<code class="docutils literal notranslate"><span class="pre">W3siYXR0cmlidXRlTmFtZSI6ICJjb21wdXRlcl9tZW1vcnkiLCAib3Bl</span></code>-
<code class="docutils literal notranslate"><span class="pre">cmF0aW9uIjogIj49IiwgInZhbHVlIjogMTZ9XQo=</span></code>. Defaults to no restriction.</p></li>
</ul>
</dd>
<dt class="field-even">Request Headers</dt>
<dd class="field-even"><ul class="simple">
<li><p><span><a class="reference external" href="https://tools.ietf.org/html/rfc7235#section-4.2">Authorization</a></span> – Bearer &lt;OAuth2_token&gt;</p></li>
</ul>
</dd>
<dt class="field-odd">Response Headers</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span><a class="reference external" href="https://tools.ietf.org/html/rfc7231#section-3.1.1.5">Content-Type</a></span> – text/plain, application/json</p></li>
</ul>
</dd>
<dt class="field-even">Status Codes</dt>
<dd class="field-even"><ul class="simple">
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a></span> – No error.</p></li>
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.5.1">500 Internal Server Error</a></span> – Unexpected error encountered. Returns the error message as a string.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="http post">
<dt class="sig sig-object http" id="post--schema-schema_name-table-table_name-record">
<span class="sig-name descname"><span class="pre">POST</span> </span><span class="sig-name descname"><span class="pre">/schema/{schema_name}/table/{table_name}/record</span></span><a class="headerlink" href="#post--schema-schema_name-table-table_name-record" title="Permalink to this definition"></a></dt>
<dd><p>Route to insert a record. Omitted attributes utilize the default if set.</p>
<p><strong>Example request</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/schema/alpha_company/table/Computer/record</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">fakeservices.datajoint.io</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">Bearer &lt;token&gt;</span>

{
    &quot;records&quot;: [
        {
            &quot;computer_id&quot;: &quot;ffffffff-86d5-4af7-a013-89bde75528bd&quot;,
            &quot;computer_serial&quot;: &quot;ZYXWVEISJ&quot;,
            &quot;computer_brand&quot;: &quot;HP&quot;,
            &quot;computer_built&quot;: &quot;2021-01-01&quot;,
            &quot;computer_processor&quot;: 2.7,
            &quot;computer_memory&quot;: 32,
            &quot;computer_weight&quot;: 3.7,
            &quot;computer_cost&quot;: 599.99,
            &quot;computer_preowned&quot;: 0,
            &quot;computer_purchased&quot;: &quot;2021-02-01 13:00:00&quot;,
            &quot;computer_updates&quot;: 0
        }
    ]
}
</pre></div>
</div>
<p><strong>Example successful response</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Vary</span><span class="o">:</span> <span class="l">Accept</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/plain</span>

Insert Successful
</pre></div>
</div>
<p><strong>Example unexpected response</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">500</span> <span class="ne">Internal Server Error</span>
<span class="na">Vary</span><span class="o">:</span> <span class="l">Accept</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/plain</span>

400 Bad Request: The browser (or proxy) sent a request that this server could not
    understand.
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Request Headers</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span><a class="reference external" href="https://tools.ietf.org/html/rfc7235#section-4.2">Authorization</a></span> – Bearer &lt;OAuth2_token&gt;</p></li>
</ul>
</dd>
<dt class="field-even">Response Headers</dt>
<dd class="field-even"><ul class="simple">
<li><p><span><a class="reference external" href="https://tools.ietf.org/html/rfc7231#section-3.1.1.5">Content-Type</a></span> – text/plain</p></li>
</ul>
</dd>
<dt class="field-odd">Status Codes</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a></span> – No error.</p></li>
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.5.1">500 Internal Server Error</a></span> – Unexpected error encountered. Returns the error message as a string.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="http patch">
<dt class="sig sig-object http" id="patch--schema-schema_name-table-table_name-record">
<span class="sig-name descname"><span class="pre">PATCH</span> </span><span class="sig-name descname"><span class="pre">/schema/{schema_name}/table/{table_name}/record</span></span><a class="headerlink" href="#patch--schema-schema_name-table-table_name-record" title="Permalink to this definition"></a></dt>
<dd><p>Route to update a record. Omitted attributes utilize the default if set.</p>
<p><strong>Example request</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">PATCH</span> <span class="nn">/schema/alpha_company/table/Computer/record</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">fakeservices.datajoint.io</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">Bearer &lt;token&gt;</span>

{
    &quot;records&quot;: [
        {
            &quot;computer_id&quot;: &quot;ffffffff-86d5-4af7-a013-89bde75528bd&quot;,
            &quot;computer_serial&quot;: &quot;ZYXWVEISJ&quot;,
            &quot;computer_brand&quot;: &quot;HP&quot;,
            &quot;computer_built&quot;: &quot;2021-01-01&quot;,
            &quot;computer_processor&quot;: 2.7,
            &quot;computer_memory&quot;: 32,
            &quot;computer_weight&quot;: 3.7,
            &quot;computer_cost&quot;: 601.01,
            &quot;computer_preowned&quot;: 0,
            &quot;computer_purchased&quot;: &quot;2021-02-01 13:00:00&quot;,
            &quot;computer_updates&quot;: 0
        }
    ]
}
</pre></div>
</div>
<p><strong>Example successful response</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Vary</span><span class="o">:</span> <span class="l">Accept</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/plain</span>

Update Successful
</pre></div>
</div>
<p><strong>Example unexpected response</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">500</span> <span class="ne">Internal Server Error</span>
<span class="na">Vary</span><span class="o">:</span> <span class="l">Accept</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/plain</span>

400 Bad Request: The browser (or proxy) sent a request that this server could not
    understand.
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Request Headers</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span><a class="reference external" href="https://tools.ietf.org/html/rfc7235#section-4.2">Authorization</a></span> – Bearer &lt;OAuth2_token&gt;</p></li>
</ul>
</dd>
<dt class="field-even">Response Headers</dt>
<dd class="field-even"><ul class="simple">
<li><p><span><a class="reference external" href="https://tools.ietf.org/html/rfc7231#section-3.1.1.5">Content-Type</a></span> – text/plain</p></li>
</ul>
</dd>
<dt class="field-odd">Status Codes</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a></span> – No error.</p></li>
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.5.1">500 Internal Server Error</a></span> – Unexpected error encountered. Returns the error message as a string.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="http delete">
<dt class="sig sig-object http" id="delete--schema-schema_name-table-table_name-record">
<span class="sig-name descname"><span class="pre">DELETE</span> </span><span class="sig-name descname"><span class="pre">/schema/{schema_name}/table/{table_name}/record</span></span><a class="headerlink" href="#delete--schema-schema_name-table-table_name-record" title="Permalink to this definition"></a></dt>
<dd><p>Route to delete a specific record.</p>
<p><strong>Example request</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">DELETE</span> <span class="nn">/schema/alpha_company/table/Computer/record?cascade=false&amp;restriction=W3siYXR0cmlidXRlTmFtZSI6ICJjb21wdXRlcl9tZW1vcnkiLCAib3BlcmF0aW9uIjogIj49IiwgInZhbHVlIjogMTZ9XQo=</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">fakeservices.datajoint.io</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">Bearer &lt;token&gt;</span>
</pre></div>
</div>
<p><strong>Example successful response</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Vary</span><span class="o">:</span> <span class="l">Accept</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/plain</span>

Delete Successful
</pre></div>
</div>
<p><strong>Example conflict response</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">409</span> <span class="ne">Conflict</span>
<span class="na">Vary</span><span class="o">:</span> <span class="l">Accept</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
    <span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;IntegrityError&quot;</span><span class="p">,</span>
    <span class="nt">&quot;error_msg&quot;</span><span class="p">:</span> <span class="s2">&quot;Cannot delete or update a parent row: a foreign key constraint</span>
<span class="s2">        fails (`alpha_company`.`#employee`, CONSTRAINT `#employee_ibfk_1` FOREIGN</span>
<span class="s2">        KEY (`computer_id`) REFERENCES `computer` (`computer_id`) ON DELETE</span>
<span class="s2">        RESTRICT ON UPDATE CASCADE&quot;</span><span class="p">,</span>
    <span class="nt">&quot;child_schema&quot;</span><span class="p">:</span> <span class="s2">&quot;alpha_company&quot;</span><span class="p">,</span>
    <span class="nt">&quot;child_table&quot;</span><span class="p">:</span> <span class="s2">&quot;Employee&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Example unexpected response</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">500</span> <span class="ne">Internal Server Error</span>
<span class="na">Vary</span><span class="o">:</span> <span class="l">Accept</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/plain</span>

400 Bad Request: The browser (or proxy) sent a request that this server could not
    understand.
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Query Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cascade</strong> – Enable cascading delete. Accepts <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code>.
Defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>restriction</strong> – Base64-encoded <code class="docutils literal notranslate"><span class="pre">AND</span></code> sequence of restrictions. For example, you
could restrict as <code class="docutils literal notranslate"><span class="pre">[{&quot;attributeName&quot;:</span> <span class="pre">&quot;computer_memory&quot;,</span> <span class="pre">&quot;operation&quot;:</span> <span class="pre">&quot;&gt;=&quot;,</span></code>-
<code class="docutils literal notranslate"><span class="pre">&quot;value&quot;:</span> <span class="pre">16}]</span></code> with this param set as
<code class="docutils literal notranslate"><span class="pre">W3siYXR0cmlidXRlTmFtZSI6ICJjb21wdXRlcl9tZW1vcnkiLCAib3Bl</span></code>-
<code class="docutils literal notranslate"><span class="pre">cmF0aW9uIjogIj49IiwgInZhbHVlIjogMTZ9XQo=</span></code>. Defaults to no restriction.</p></li>
</ul>
</dd>
<dt class="field-even">Request Headers</dt>
<dd class="field-even"><ul class="simple">
<li><p><span><a class="reference external" href="https://tools.ietf.org/html/rfc7235#section-4.2">Authorization</a></span> – Bearer &lt;OAuth2_token&gt;</p></li>
</ul>
</dd>
<dt class="field-odd">Response Headers</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span><a class="reference external" href="https://tools.ietf.org/html/rfc7231#section-3.1.1.5">Content-Type</a></span> – text/plain, application/json</p></li>
</ul>
</dd>
<dt class="field-even">Status Codes</dt>
<dd class="field-even"><ul class="simple">
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a></span> – No error.</p></li>
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.10">409 Conflict</a></span> – Attempting to delete a record with dependents while <code class="docutils literal notranslate"><span class="pre">cascade</span></code> set
to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.5.1">500 Internal Server Error</a></span> – Unexpected error encountered. Returns the error message as a string.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pharus.server.run">
<span class="sig-prename descclassname"><span class="pre">pharus.server.</span></span><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pharus.server.run" title="Permalink to this definition"></a></dt>
<dd><p>Starts API server.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pharus.server.schema">
<span class="sig-prename descclassname"><span class="pre">pharus.server.</span></span><span class="sig-name descname"><span class="pre">schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">jwt_payload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#pharus.server.schema" title="Permalink to this definition"></a></dt>
<dd><p>Handler for <code class="docutils literal notranslate"><span class="pre">/schema</span></code> route.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>jwt_payload</strong> (<em>dict</em>) – Dictionary containing databaseAddress, username, and password strings.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>If successful then sends back a list of schemas names otherwise returns error.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
<dl class="http get">
<dt class="sig sig-object http" id="get--schema">
<span class="sig-name descname"><span class="pre">GET</span> </span><span class="sig-name descname"><span class="pre">/schema</span></span><a class="headerlink" href="#get--schema" title="Permalink to this definition"></a></dt>
<dd><p>Route to get list of schemas.</p>
<p><strong>Example request</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/schema</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">fakeservices.datajoint.io</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">Bearer &lt;token&gt;</span>
</pre></div>
</div>
<p><strong>Example successful response</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Vary</span><span class="o">:</span> <span class="l">Accept</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
    <span class="nt">&quot;schemaNames&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;alpha_company&quot;</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Example unexpected response</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">500</span> <span class="ne">Internal Server Error</span>
<span class="na">Vary</span><span class="o">:</span> <span class="l">Accept</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/plain</span>

400 Bad Request: The browser (or proxy) sent a request that this server could not
    understand.
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Request Headers</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span><a class="reference external" href="https://tools.ietf.org/html/rfc7235#section-4.2">Authorization</a></span> – Bearer &lt;OAuth2_token&gt;</p></li>
</ul>
</dd>
<dt class="field-even">Response Headers</dt>
<dd class="field-even"><ul class="simple">
<li><p><span><a class="reference external" href="https://tools.ietf.org/html/rfc7231#section-3.1.1.5">Content-Type</a></span> – text/plain, application/json</p></li>
</ul>
</dd>
<dt class="field-odd">Status Codes</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a></span> – No error.</p></li>
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.5.1">500 Internal Server Error</a></span> – Unexpected error encountered. Returns the error message as a string.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pharus.server.table">
<span class="sig-prename descclassname"><span class="pre">pharus.server.</span></span><span class="sig-name descname"><span class="pre">table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">jwt_payload</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">schema_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#pharus.server.table" title="Permalink to this definition"></a></dt>
<dd><p>Handler for <code class="docutils literal notranslate"><span class="pre">/schema/{schema_name}/table</span></code> route.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>jwt_payload</strong> (<em>dict</em>) – Dictionary containing databaseAddress, username, and password strings.</p></li>
<li><p><strong>schema_name</strong> (<em>str</em>) – Schema name.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>If successful then sends back a list of table names otherwise returns error.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
<dl class="http get">
<dt class="sig sig-object http" id="get--schema-schema_name-table">
<span class="sig-name descname"><span class="pre">GET</span> </span><span class="sig-name descname"><span class="pre">/schema/{schema_name}/table</span></span><a class="headerlink" href="#get--schema-schema_name-table" title="Permalink to this definition"></a></dt>
<dd><p>Route to get tables within a schema.</p>
<p><strong>Example request</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/schema/alpha_company/table</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">fakeservices.datajoint.io</span>
<span class="na">Authorization</span><span class="o">:</span> <span class="l">Bearer &lt;token&gt;</span>
</pre></div>
</div>
<p><strong>Example successful response</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Vary</span><span class="o">:</span> <span class="l">Accept</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
    <span class="nt">&quot;tableTypes&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;computed&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="nt">&quot;imported&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="nt">&quot;lookup&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;Employee&quot;</span>
        <span class="p">],</span>
        <span class="nt">&quot;manual&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;Computer&quot;</span>
        <span class="p">],</span>
        <span class="nt">&quot;part&quot;</span><span class="p">:</span> <span class="p">[]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Example unexpected response</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">500</span> <span class="ne">Internal Server Error</span>
<span class="na">Vary</span><span class="o">:</span> <span class="l">Accept</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">text/plain</span>

400 Bad Request: The browser (or proxy) sent a request that this server could not
    understand.
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Query Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>schema_name</strong> – Schema name.</p></li>
</ul>
</dd>
<dt class="field-even">Request Headers</dt>
<dd class="field-even"><ul class="simple">
<li><p><span><a class="reference external" href="https://tools.ietf.org/html/rfc7235#section-4.2">Authorization</a></span> – Bearer &lt;OAuth2_token&gt;</p></li>
</ul>
</dd>
<dt class="field-odd">Response Headers</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span><a class="reference external" href="https://tools.ietf.org/html/rfc7231#section-3.1.1.5">Content-Type</a></span> – text/plain, application/json</p></li>
</ul>
</dd>
<dt class="field-even">Status Codes</dt>
<dd class="field-even"><ul class="simple">
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a></span> – No error.</p></li>
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.5.1">500 Internal Server Error</a></span> – Unexpected error encountered. Returns the error message as a string.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-pharus.version">
<span id="pharus-version-module"></span><h2>pharus.version module<a class="headerlink" href="#module-pharus.version" title="Permalink to this headline"></a></h2>
<p>Package metadata.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="modules.html" class="btn btn-neutral float-left" title="API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, DataJoint Contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>